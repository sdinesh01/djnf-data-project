[
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "Where’s the coal? Export locations & demographics",
    "section": "",
    "text": "This page seeks to present a test workflow for an upcoming Howard Center for Investigative Journalism project on freight trains that haul coal and pollute communities across the country with coal dust.\nStories about particulate pollution in the industrial sector have exposed environmental consequences for the air, earth, and our waterways. This project would take the first comprehensive look at communities along coal transportation routes – particularly relevant in the wake of major freight derailments, contamination events, and discussions about regulating the length and staff numbers aboard freight transport.\nThe potential impact of this project could be increased investment (social and financial) for particulate monitoring sensors along transportation hubs and/or increased industrial regulation for coal transporters. The social impact would be increasing the public awareness of industrial air pollution or providing an explanation for the phenomenon in affected communities.\nThis story would feature visual components like maps and other data graphics and photos and videos of coal trains and transportation routes.\nNext steps include: creating buffers and performing a spatial join to merge our demographic and geographic data. Then, I will take a look at demographic data at coal export locations nationwide. This analysis will precede a future analysis of complete train routes.\nThis page includes two parts: importing Census demographic data and mapping coal export locations. This test workflow will examine three communities where CSX rail lines run: Prince George’s County and Montgomery County in Maryland, and Jefferson County in West Virginia.\n\n\n\n# use this block for imports\nlibrary(leaflet) # for mapping\nlibrary(sf) # for mapping\nlibrary(janitor)\nlibrary(tidyverse)\nlibrary(tidycensus)"
  },
  {
    "objectID": "index.html#story-memo",
    "href": "index.html#story-memo",
    "title": "Where’s the coal? Export locations & demographics",
    "section": "",
    "text": "This page seeks to present a test workflow for an upcoming Howard Center for Investigative Journalism project on freight trains that haul coal and pollute communities across the country with coal dust.\nStories about particulate pollution in the industrial sector have exposed environmental consequences for the air, earth, and our waterways. This project would take the first comprehensive look at communities along coal transportation routes – particularly relevant in the wake of major freight derailments, contamination events, and discussions about regulating the length and staff numbers aboard freight transport.\nThe potential impact of this project could be increased investment (social and financial) for particulate monitoring sensors along transportation hubs and/or increased industrial regulation for coal transporters. The social impact would be increasing the public awareness of industrial air pollution or providing an explanation for the phenomenon in affected communities.\nThis story would feature visual components like maps and other data graphics and photos and videos of coal trains and transportation routes.\nNext steps include: creating buffers and performing a spatial join to merge our demographic and geographic data. Then, I will take a look at demographic data at coal export locations nationwide. This analysis will precede a future analysis of complete train routes.\nThis page includes two parts: importing Census demographic data and mapping coal export locations. This test workflow will examine three communities where CSX rail lines run: Prince George’s County and Montgomery County in Maryland, and Jefferson County in West Virginia.\n\n\n\n# use this block for imports\nlibrary(leaflet) # for mapping\nlibrary(sf) # for mapping\nlibrary(janitor)\nlibrary(tidyverse)\nlibrary(tidycensus)"
  },
  {
    "objectID": "index.html#working-with-census-demographic-data",
    "href": "index.html#working-with-census-demographic-data",
    "title": "Where’s the coal? Export locations & demographics",
    "section": "Working with Census demographic data",
    "text": "Working with Census demographic data\n\n# Import demographic data\ncensus_county_stats = read.csv(\"data/census-county-stats.csv\")\n\n# List of counties you want to filter for\ncounties_to_keep &lt;- c(\"Prince George's County\", \"Montgomery County\", \"Jefferson County\")\n\n# List of states you want to filter for\nstates_to_keep &lt;- c(\"Maryland\", \"West Virginia\")\n\n# Filter the data frame\nfiltered_df &lt;- census_county_stats[census_county_stats$county %in% counties_to_keep & census_county_stats$state %in% states_to_keep, ]\n\n\n# Get state figures for comparison\n\nmaryland_stats &lt;- get_acs(geography = \"state\", variables = c( \"B01001_001\",\"B02001_002\",\"B02001_003\",\"B02001_004\",\"B03001_003\",\"B06012_002\",\"B19013_001\"), state=\"Maryland\", year = 2022) %&gt;%\n  select(GEOID, variable, estimate) %&gt;%\n  pivot_wider(names_from = variable, values_from = estimate) %&gt;%\n  rename(\n    total_pop = B01001_001,\n    white_pop = B02001_002,\n    black_pop = B02001_003,\n    native_pop = B02001_004,\n    hispanic_pop = B03001_003,\n    poverty_pop = B06012_002,\n    median_income = B19013_001\n  ) %&gt;%\n  mutate(pct_white = round(white_pop/total_pop, 2) * 100,\n         pct_nonwhite = 100 - round(white_pop/total_pop, 2) * 100,\n         pct_black = round(black_pop/total_pop, 2) * 100,\n         pct_native = round(native_pop/total_pop, 2) * 100,\n         pct_hispanic = round(hispanic_pop/total_pop, 2) * 100,\n         pct_poverty = round(poverty_pop/total_pop, 2) * 100\n         ) %&gt;%\n  clean_names()\n\n\nwva_stats &lt;- get_acs(geography = \"state\", variables = c( \"B01001_001\",\"B02001_002\",\"B02001_003\",\"B02001_004\",\"B03001_003\",\"B06012_002\",\"B19013_001\"), state=\"West Virginia\", year = 2022) %&gt;%\n  select(GEOID, variable, estimate) %&gt;%\n  pivot_wider(names_from = variable, values_from = estimate) %&gt;%\n  rename(\n    total_pop = B01001_001,\n    white_pop = B02001_002,\n    black_pop = B02001_003,\n    native_pop = B02001_004,\n    hispanic_pop = B03001_003,\n    poverty_pop = B06012_002,\n    median_income = B19013_001\n  ) %&gt;%\n  mutate(pct_white = round(white_pop/total_pop, 2) * 100,\n         pct_nonwhite = 100 - round(white_pop/total_pop, 2) * 100,\n         pct_black = round(black_pop/total_pop, 2) * 100,\n         pct_native = round(native_pop/total_pop, 2) * 100,\n         pct_hispanic = round(hispanic_pop/total_pop, 2) * 100,\n         pct_poverty = round(poverty_pop/total_pop, 2) * 100\n         ) %&gt;%\n  clean_names()\n\n \nTransport trains run through Hyattsville, Maryland (located in Prince George’s County), which is 14% white, 61% Black, 20% Hispanic, and has a 9% poverty rate. The median household income in PG County is $97935.\nIn Montgomery County (where Silver Spring is located), the population is 47% white, 19% Black, 20% Hispanic, and has a 7% poverty rate. The median household income in Montgomery County is $125,583.\nStatewide, the population is 51% white, 30% Black, 11% Hispanic, and has a 9% poverty rate. The median household income is $98,461.\n \nIn Jefferson County, West Virginia – where Harpers Ferry is located – the population is 84% white, 5% Black, 6% Hispanic, and has a 9% poverty rate. The median household income in Montgomery County is $93,744.\nStatewide, the population is 91% white, 3% Black, 2% Hispanic, and has a 16% poverty rate. The median household income in West Virginia is $55,217."
  },
  {
    "objectID": "index.html#mapping-coal-export-locations",
    "href": "index.html#mapping-coal-export-locations",
    "title": "Where’s the coal? Export locations & demographics",
    "section": "Mapping coal export locations",
    "text": "Mapping coal export locations\nIn Excel, I filtered the original global dataset to only coal export locations in the United States. That is the dataset that is imported here. The original data can be found and downloaded here.\nWe have our demographic data at a county and tract level, but we will be using counties for visualization since they render significantly faster in our browser. Tract-level data is available in the data folder.\n\n# import point and shapefiles for mapping\n\n# Load point data\ndata = read.csv(\"data/coal-export-terminals-us.csv\")\npoints_sf &lt;- st_as_sf(data, coords = c(\"Longitude\", \"Latitude\"), crs = 4269)\n\n# Load census county shapefiles\ncensus_counties &lt;- st_read(\"data/all_census_counties_us.shp\", quiet=TRUE)\n\n\n# Create the map\n# Quiet parameter turns off leaflet output text when it imports shapefile\nmap &lt;- leaflet(options = leafletOptions(preferCanvas = TRUE)) %&gt;%\n  addTiles() %&gt;%\n  setView(lng = -96.25, lat = 39.50, zoom = 4) %&gt;% \n  addPolygons(data = census_counties,\n              fillColor = \"lightgray\",\n              color = \"gray\",\n              weight = 1,\n              fillOpacity = 0.5) %&gt;% \n  addCircleMarkers(\n              data = points_sf,\n             color = \"red\",\n             opacity = 0.8,\n             weight = 2,\n             radius = 5)\n\n\nmap"
  },
  {
    "objectID": "tidycensus_data.html",
    "href": "tidycensus_data.html",
    "title": "County & Tract-level demographic data via TidyCensus",
    "section": "",
    "text": "About this page\nBelow, I have provided the code to produce dataframes with county and tract level demographic information, including race/ethnicity, poverty rate, and median income. These dataframes are stored in the census_tract_stats and census_county_stats variables. These dataframes are written to csv files.\nA future iteration of this code will functionalize the process of retrieving nationwide county and tract data in an R script.\n\n\nSet up libraries\n\nlibrary(tidyverse)\nlibrary(tidycensus)\nlibrary(janitor)\n\n\n# set api key for tidycensus\n# census_api_key(\"API_KEY\", install=TRUE)\n\n\n\nInstantiate global vars\n\n# instantiate global variable \ndata(fips_codes)\n\n## store to var\nfips_codes &lt;- fips_codes  \n\n\n\nRetrieve tract-level demographic data\n\n## Get list of states (Exclude non-states, except DC)\nstates &lt;- fips_codes %&gt;%\n  select(state) %&gt;%\n  distinct() %&gt;%\n  head(51) %&gt;%\n  as_vector() \n\n# Get census tract data for all states\ncensus_tract_stats &lt;- get_acs(geography = \"tract\", variables = c( \"B01001_001\",\"B02001_002\",\"B02001_003\",\"B02001_004\",\"B03001_003\",\"B06012_002\",\"B19013_001\"), state=states, year = 2022) %&gt;%\n  select(GEOID, variable, estimate) %&gt;%\n  pivot_wider(names_from = variable, values_from = estimate) %&gt;%\n  rename(\n    total_pop = B01001_001,\n    white_pop = B02001_002,\n    black_pop = B02001_003,\n    native_pop = B02001_004,\n    hispanic_pop = B03001_003,\n    poverty_pop = B06012_002,\n    median_income = B19013_001\n  ) %&gt;%\n  mutate(pct_white = round(white_pop/total_pop, 2) * 100,\n         pct_nonwhite = 100 - round(white_pop/total_pop, 2) * 100,\n         pct_black = round(black_pop/total_pop, 2) * 100,\n         pct_native = round(native_pop/total_pop, 2) * 100,\n         pct_hispanic = round(hispanic_pop/total_pop, 2) * 100,\n         pct_poverty = round(poverty_pop/total_pop, 2) * 100\n         ) %&gt;%\n  clean_names()\n\n# Extract state and county FIPS codes from GEOID\ncensus_tract_stats &lt;- census_tract_stats %&gt;%\n  mutate(state_fips = substr(geoid, 1, 2),\n         county_fips = substr(geoid, 3, 5))\n\n# Join with fips_codes to get state and county names\nfips_codes &lt;- fips_codes %&gt;%\n  select(state_fips = state_code, county_fips = county_code, state, county)\n\ncensus_tract_stats &lt;- census_tract_stats %&gt;%\n  left_join(fips_codes, by = c(\"state_fips\", \"county_fips\")) %&gt;%\n  select(geoid, state, county, starts_with(\"pct\"), median_income)\n\n\n# write dataframe to csv\nwrite.csv(census_tract_stats, file = \"data/census-tract-stats.csv\", row.names = FALSE)\n\n\n\nRetrieve county-level demographic data\n\n# Get county-level data for all states\ncensus_county_stats &lt;- get_acs(geography = \"county\", variables = c( \"B01001_001\",\"B02001_002\",\"B02001_003\",\"B02001_004\",\"B03001_003\",\"B06012_002\",\"B19013_001\"), year = 2022) %&gt;%\n  select(GEOID, NAME, variable, estimate) %&gt;%\n  pivot_wider(names_from = variable, values_from = estimate) %&gt;%\n  rename(\n    total_pop = B01001_001,\n    white_pop = B02001_002,\n    black_pop = B02001_003,\n    native_pop = B02001_004,\n    hispanic_pop = B03001_003,\n    poverty_pop = B06012_002,\n    median_income = B19013_001\n  ) %&gt;%\n  mutate(pct_white = round(white_pop/total_pop, 2) * 100,\n         pct_nonwhite = 100 - round(white_pop/total_pop, 2) * 100,\n         pct_black = round(black_pop/total_pop, 2) * 100,\n         pct_native = round(native_pop/total_pop, 2) * 100,\n         pct_hispanic = round(hispanic_pop/total_pop, 2) * 100,\n         pct_poverty = round(poverty_pop/total_pop, 2) * 100\n         ) %&gt;%\n  clean_names() %&gt;% \n  separate(name, into = c(\"county\", \"state\"), sep = \", \")\n\n\n# write dataframe to csv\nwrite.csv(census_county_stats, file = \"data/census-county-stats.csv\", row.names = FALSE)"
  },
  {
    "objectID": "coal_export_points.html",
    "href": "coal_export_points.html",
    "title": "coal_exports",
    "section": "",
    "text": "library(tigris)\n\nWarning: package 'tigris' was built under R version 4.3.3\n\n\nTo enable caching of data, set `options(tigris_use_cache = TRUE)`\nin your R script or .Rprofile.\n\nlibrary(sf)\n\nWarning: package 'sf' was built under R version 4.3.3\n\n\nLinking to GEOS 3.11.2, GDAL 3.8.2, PROJ 9.3.1; sf_use_s2() is TRUE\n\nlibrary(leaflet)\n\nWarning: package 'leaflet' was built under R version 4.3.3\n\nlibrary(tidyverse)\n\nWarning: package 'tidyverse' was built under R version 4.3.3\n\n\nWarning: package 'ggplot2' was built under R version 4.3.3\n\n\nWarning: package 'tibble' was built under R version 4.3.3\n\n\nWarning: package 'tidyr' was built under R version 4.3.3\n\n\nWarning: package 'readr' was built under R version 4.3.3\n\n\nWarning: package 'purrr' was built under R version 4.3.3\n\n\nWarning: package 'dplyr' was built under R version 4.3.3\n\n\nWarning: package 'forcats' was built under R version 4.3.3\n\n\nWarning: package 'lubridate' was built under R version 4.3.3\n\n\n── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──\n✔ dplyr     1.1.4     ✔ readr     2.1.5\n✔ forcats   1.0.0     ✔ stringr   1.5.1\n✔ ggplot2   3.5.0     ✔ tibble    3.2.1\n✔ lubridate 1.9.3     ✔ tidyr     1.3.1\n✔ purrr     1.0.2     \n\n\n── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──\n✖ dplyr::filter() masks stats::filter()\n✖ dplyr::lag()    masks stats::lag()\nℹ Use the conflicted package (&lt;http://conflicted.r-lib.org/&gt;) to force all conflicts to become errors\n\nlibrary(janitor)\n\nWarning: package 'janitor' was built under R version 4.3.3\n\n\n\nAttaching package: 'janitor'\n\nThe following objects are masked from 'package:stats':\n\n    chisq.test, fisher.test\n\nlibrary(tidycensus)\n\nWarning: package 'tidycensus' was built under R version 4.3.3"
  },
  {
    "objectID": "coal_export_points.html#import-libraries",
    "href": "coal_export_points.html#import-libraries",
    "title": "coal_exports",
    "section": "",
    "text": "library(tigris)\n\nWarning: package 'tigris' was built under R version 4.3.3\n\n\nTo enable caching of data, set `options(tigris_use_cache = TRUE)`\nin your R script or .Rprofile.\n\nlibrary(sf)\n\nWarning: package 'sf' was built under R version 4.3.3\n\n\nLinking to GEOS 3.11.2, GDAL 3.8.2, PROJ 9.3.1; sf_use_s2() is TRUE\n\nlibrary(leaflet)\n\nWarning: package 'leaflet' was built under R version 4.3.3\n\nlibrary(tidyverse)\n\nWarning: package 'tidyverse' was built under R version 4.3.3\n\n\nWarning: package 'ggplot2' was built under R version 4.3.3\n\n\nWarning: package 'tibble' was built under R version 4.3.3\n\n\nWarning: package 'tidyr' was built under R version 4.3.3\n\n\nWarning: package 'readr' was built under R version 4.3.3\n\n\nWarning: package 'purrr' was built under R version 4.3.3\n\n\nWarning: package 'dplyr' was built under R version 4.3.3\n\n\nWarning: package 'forcats' was built under R version 4.3.3\n\n\nWarning: package 'lubridate' was built under R version 4.3.3\n\n\n── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──\n✔ dplyr     1.1.4     ✔ readr     2.1.5\n✔ forcats   1.0.0     ✔ stringr   1.5.1\n✔ ggplot2   3.5.0     ✔ tibble    3.2.1\n✔ lubridate 1.9.3     ✔ tidyr     1.3.1\n✔ purrr     1.0.2     \n\n\n── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──\n✖ dplyr::filter() masks stats::filter()\n✖ dplyr::lag()    masks stats::lag()\nℹ Use the conflicted package (&lt;http://conflicted.r-lib.org/&gt;) to force all conflicts to become errors\n\nlibrary(janitor)\n\nWarning: package 'janitor' was built under R version 4.3.3\n\n\n\nAttaching package: 'janitor'\n\nThe following objects are masked from 'package:stats':\n\n    chisq.test, fisher.test\n\nlibrary(tidycensus)\n\nWarning: package 'tidycensus' was built under R version 4.3.3"
  },
  {
    "objectID": "coal_export_points.html#data-import",
    "href": "coal_export_points.html#data-import",
    "title": "coal_exports",
    "section": "data import",
    "text": "data import\nIn Excel, I filtered the original global dataset to only coal export locations in the United States. That is the dataset that is imported here. The original data can be found and downloaded here.\n\ndata = read.csv(\"data/coal-export-terminals-us.csv\")\ndata\n\n   Terminal.ID                             Coal.Terminal.Name\n1        T1346                             Arch Coal Terminal\n2        T1422                            Ashtabula Coal Pier\n3        T1424    Bulk Materials Handling Plant Coal Terminal\n4        T1403                         Burnside Coal Terminal\n5        T1335                              Burnside Terminal\n6        T1368                               Cahokia Terminal\n7        T1330                          Calvert City Terminal\n8        T1359                           Ceredo Coal Terminal\n9        T1328                            CNX Marine Terminal\n10       T1350             Conneaut Port Dock 3 Coal Terminal\n11       T1358                        Convent Marine Terminal\n12       T1338  Cooper Marine and Timberlands Chipco Terminal\n13       T1355                             Cora Coal Terminal\n14       T1033                         Coyote Island Terminal\n15       T1357               CSX Chesapeake Bay Coal Terminal\n16       T1351                             Deepwater Terminal\n17       T1329                              Dominion Terminal\n18       T1339                          Donora River Terminal\n19       T1340                        Fairless Hills Terminal\n20       T1337                    Four Rivers Marine Terminal\n21       T1044                  Gateway Pacific Coal Terminal\n22       T1356                     Grand Rivers Coal Terminal\n23       T1345                          Houston Bulk Terminal\n24       T1325                 International Marine Terminals\n25       T1336       International Marine Terminals expansion\n26       T1041                      Jacintoport Coal Terminal\n27       T1343                          Kellogg Coal Terminal\n28       T1331            Keystone Coal Terminal Jacksonville\n29       T1366                      Keystone Terminal Ironton\n30       T1341                             Lake Coal Terminal\n31       T1365                        Lamberts Point Terminal\n32       T1323                        Levin-Richmond Terminal\n33       T1347   Louisville Jefferson Riverport Coal Terminal\n34       T1364                         McDuffie Coal Terminal\n35       T1043    Millennium Bulk Logistics Longview Terminal\n36       T1367                        Milwaukee Bulk Terminal\n37       T1360 Mississippi River Midstream Operators Terminal\n38       T1036                          Mobile River Terminal\n39       T1327                                        Pier IX\n40       T1333                                         Pier X\n41       T1034                    Point Comfort Coal Terminal\n42       T1046                 Port of Coos Bay Coal Terminal\n43       T1354           Port of Corpus Christi Coal Terminal\n44       T1039          Port of Corpus Christi Coal Terminals\n45       T1363          Port of Duluth-Superior Coal Terminal\n46       T1040                Port of Galveston Coal Terminal\n47       T1047             Port of Grays Harbor Coal Terminal\n48       T1342                Port of Green Bay Coal Terminal\n49       T1344               Port of Long Beach Coal Terminal\n50       T1361              Port of New Orleans Coal Terminal\n51       T1402                  Port of Oakland Coal Terminal\n52       T1324                 Port of Stockton Coal Terminal\n53       T1042                    Port Westward Coal Terminal\n54       T1349                           Quincy Coal Terminal\n55       T1444                                   RAM Terminal\n56       T1037                    Richmond Port Coal Terminal\n57       T1348                    Sandusky Dock Coal Terminal\n58       T1423                           Seward Coal Terminal\n59       T1035                   Shipyard River Coal Terminal\n60       T1326                   Shipyard River Coal Terminal\n61       T1332                           Sitran Coal Terminal\n62       T1362                         Superior Coal Terminal\n63       T1322                           Tampa Bay Stevedores\n64       T1334              Tradepoint Atlantic Bulk Terminal\n65       T1038                      United Bulk Coal Terminal\n66       T1353                      United Bulk Coal Terminal\n67       T1045                   Vancouver Port Coal Terminal\n68       T1404                    Walker County Coal Terminal\n69       T1352                       Warrenton River Terminal\n                  Coal.Terminal.AKAs             Parent.Port\n1                                                          -\n2                                                          -\n3                                             Port of Mobile\n4                                                          -\n5                                                          -\n6                                                          -\n7                                                          -\n8                                                          -\n9          Baltimore Marine Terminal       Port of Baltimore\n10                                             Conneaut Port\n11                                                         -\n12                                            Port of Mobile\n13                                                         -\n14                                            Port of Morrow\n15             Curtis Bay Coal Piers       Port of Baltimore\n16                                           Port of Houston\n17                                     Port of Hampton Roads\n18                                                         -\n19                                                         -\n20                                                         -\n21                                                         -\n22                                                         -\n23           Penn City Bulk Terminal         Port of Houston\n24                                       Port of New Orleans\n25                                       Port of New Orleans\n26                                           Port of Houston\n27                                                Mokpo Port\n28                                      Port of Jacksonville\n29                                                         -\n30                                                         -\n31                                     Port of Hampton Roads\n32                                                         -\n33                                                         -\n34                                            Port of Mobile\n35                                                         -\n36                                                         -\n37                                       Port of New Orleans\n38               Blue Creek Terminal          Port of Mobile\n39                                     Port of Hampton Roads\n40                                     Port of Hampton Roads\n41                                     Port of Point Comfort\n42                                          Port of Coos Bay\n43                                    Port of Corpus Christi\n44                                    Port of Corpus Christi\n45                                   Port of Duluth-Superior\n46                                         Port of Galveston\n47                                      Port of Grays Harbor\n48                                         Port of Green Bay\n49                                        Port of Long Beach\n50                                       Port of New Orleans\n51 Oakland Bulk & Oversized Terminal         Port of Oakland\n52                                          Port of Stockton\n53                                             Port Westward\n54                                                         -\n55                                                         -\n56                                             Richmond Port\n57                                          Port of Sandusky\n58                                                         -\n59                                        Port of Charleston\n60                                                         -\n61                                                         -\n62                                   Port of Duluth-Superior\n63                                         Port of Tampa Bay\n64                                                         -\n65                    Host at Davant     Port of New Orleans\n66                                       Port of New Orleans\n67                                         Port of Vancouver\n68                                                         -\n69                                                         -\n                                                             GEM.Wiki\n1                             https://www.gem.wiki/Arch_Coal_Terminal\n2                            https://www.gem.wiki/Ashtabula_Coal_Pier\n3                  https://www.gem.wiki/Bulk_Materials_Handling_Plant\n4                              https://www.gem.wiki/Burnside_Terminal\n5                              https://www.gem.wiki/Burnside_Terminal\n6                               https://www.gem.wiki/Cahokia_Terminal\n7                          https://www.gem.wiki/Calvert_City_Terminal\n8                           https://www.gem.wiki/Ceredo_Coal_Terminal\n9                            https://www.gem.wiki/CNX_Marine_Terminal\n10                                 https://www.gem.wiki/Conneaut_Port\n11                       https://www.gem.wiki/Convent_Marine_Terminal\n12 https://www.gem.wiki/Cooper_Marine_and_Timberlands_Chipco_Terminal\n13                            https://www.gem.wiki/Cora_Coal_Terminal\n14                        https://www.gem.wiki/Coyote_Island_Terminal\n15                  https://www.gem.wiki/CSX_Chesapeake_Coal_Terminal\n16                            https://www.gem.wiki/Deepwater_Terminal\n17                             https://www.gem.wiki/Dominion_Terminal\n18                         https://www.gem.wiki/Donora_River_Terminal\n19                       https://www.gem.wiki/Fairless_Hills_Terminal\n20                          https://www.gem.wiki/Four_Rivers_Terminal\n21                      https://www.gem.wiki/Gateway_Pacific_Terminal\n22                         https://www.gem.wiki/Grand_Rivers_Terminal\n23                         https://www.gem.wiki/Houston_Bulk_Terminal\n24                https://www.gem.wiki/International_Marine_Terminals\n25                https://www.gem.wiki/International_Marine_Terminals\n26                          https://www.gem.wiki/Jacintoport_Terminal\n27                              https://www.gem.wiki/Kellogg_Terminal\n28                        https://www.gem.wiki/Keystone_Coal_Terminal\n29                     https://www.gem.wiki/Keystone_Terminal_Ironton\n30                            https://www.gem.wiki/Lake_Coal_Terminal\n31                       https://www.gem.wiki/Lamberts_Point_Terminal\n32                       https://www.gem.wiki/Levin-Richmond_Terminal\n33                https://www.gem.wiki/Louisville_Jefferson_Riverport\n34                        https://www.gem.wiki/McDuffie_Coal_Terminal\n35   https://www.gem.wiki/Millennium_Bulk_Logistics_Longview_Terminal\n36                       https://www.gem.wiki/Milwaukee_Bulk_Terminal\n37         https://www.gem.wiki/Mississippi_River_Midstream_Operators\n38                         https://www.gem.wiki/Mobile_River_Terminal\n39                                       https://www.gem.wiki/Pier_IX\n40                                       https://www.gem.wiki/Pier_IX\n41                   https://www.gem.wiki/Point_Comfort_Coal_Terminal\n42                              https://www.gem.wiki/Port_of_Coos_Bay\n43                        https://www.gem.wiki/Port_of_Corpus_Christi\n44                        https://www.gem.wiki/Port_of_Corpus_Christi\n45                       https://www.gem.wiki/Port_of_Duluth-Superior\n46                             https://www.gem.wiki/Port_of_Galveston\n47                          https://www.gem.wiki/Port_of_Grays_Harbor\n48                             https://www.gem.wiki/Port_of_Green_Bay\n49                            https://www.gem.wiki/Port_of_Long_Beach\n50                           https://www.gem.wiki/Port_of_New_Orleans\n51                               https://www.gem.wiki/Port_of_Oakland\n52                              https://www.gem.wiki/Port_of_Stockton\n53                                 https://www.gem.wiki/Port_Westward\n54                          https://www.gem.wiki/Quincy_Coal_Terminal\n55                                  https://www.gem.wiki/RAM_Terminal\n56                                 https://www.gem.wiki/Richmond_Port\n57                                 https://www.gem.wiki/Sandusky_Dock\n58                          https://www.gem.wiki/Seward_Coal_Terminal\n59                  https://www.gem.wiki/Shipyard_River_Coal_Terminal\n60                  https://www.gem.wiki/Shipyard_River_Coal_Terminal\n61                          https://www.gem.wiki/Sitran_Coal_Terminal\n62                        https://www.gem.wiki/Superior_Coal_Terminal\n63                          https://www.gem.wiki/Tampa_Bay_Stevedores\n64                    https://www.gem.wiki/Chesapeake_Bulk_Stevedores\n65                          https://www.gem.wiki/United_Bulk_Terminal\n66                          https://www.gem.wiki/United_Bulk_Terminal\n67                                https://www.gem.wiki/Vancouver_Port\n68                   https://www.gem.wiki/Walker_County_Coal_Terminal\n69                      https://www.gem.wiki/Warrenton_River_Terminal\n   GEM.Wiki..Non.ENG.    Status Project.Type\n1                  NA Operating             \n2                  NA   Retired             \n3                  NA   Retired             \n4                  NA  Proposed    Expansion\n5                  NA Operating             \n6                  NA Operating             \n7                  NA Operating             \n8                  NA Operating             \n9                  NA Operating             \n10                 NA Operating             \n11                 NA Operating             \n12                 NA Operating             \n13                 NA Operating             \n14                 NA Cancelled             \n15                 NA Operating             \n16                 NA Operating             \n17                 NA Operating             \n18                 NA Operating             \n19                 NA Operating             \n20                 NA Operating             \n21                 NA Cancelled             \n22                 NA Operating             \n23                 NA Operating             \n24                 NA Operating             \n25                 NA Operating             \n26                 NA Cancelled             \n27                 NA Operating             \n28                 NA Operating             \n29                 NA Operating             \n30                 NA Operating             \n31                 NA Operating             \n32                 NA Operating             \n33                 NA Operating             \n34                 NA Operating             \n35                 NA Cancelled             \n36                 NA Operating             \n37                 NA Operating             \n38                 NA Cancelled             \n39                 NA Operating             \n40                 NA Operating             \n41                 NA Cancelled             \n42                 NA Cancelled             \n43                 NA Operating             \n44                 NA Cancelled    Expansion\n45                 NA Operating             \n46                 NA Cancelled             \n47                 NA Cancelled             \n48                 NA Operating             \n49                 NA Operating             \n50                 NA Operating             \n51                 NA  Proposed             \n52                 NA Operating             \n53                 NA Cancelled             \n54                 NA Operating             \n55                 NA   Shelved             \n56                 NA Cancelled             \n57                 NA Operating             \n58                 NA   Retired             \n59                 NA Cancelled    Expansion\n60                 NA Operating             \n61                 NA Operating             \n62                 NA Operating             \n63                 NA Operating             \n64                 NA Operating             \n65                 NA Cancelled    Expansion\n66                 NA Operating             \n67                 NA Cancelled             \n68                 NA  Proposed             \n69                 NA Operating             \n                                          Owner Capacity..Mt. Product.Type\n1                                     Arch Coal          5.44         Coal\n2                              Norfolk Southern          5.72         Coal\n3                  Alabama State Port Authority          2.45         Coal\n4                               Trafigura Group           6.8         Coal\n5                               Trafigura Group           6.8         Coal\n6                               Watco Companies             *         Coal\n7                        Southern Coal Handling         13.61         Coal\n8                                SunCoke Energy            18         Coal\n9                                 CONSOL Energy          14.5         Coal\n10                   Canadian National Railroad          8.17         Coal\n11                               SunCoke Energy         13.61    All Cargo\n12                          Cooper Consolidated          0.91         Coal\n13                Watco Companies, SCH Services            10         Coal\n14                               Port of Morrow             8         Coal\n15                              CSX Corporation          12.7         Coal\n16                                Kinder Morgan           9.1         Coal\n17        Contura Energy (65%), Arch Coal (35%)            20         Coal\n18                             Robindale Energy          1.36         Coal\n19                                Kinder Morgan          1.63    All Cargo\n20                       Southern Coal Handling             9         Coal\n21                                   SSA Marine            48         Coal\n22                              Watco Companies          10.9    All Cargo\n23                                Kinder Morgan          4.76    All Cargo\n24                                Kinder Morgan           9.1         Coal\n25                                Kinder Morgan           9.1         Coal\n26                    Jacintoport International         12.34         Coal\n27                                Kinder Morgan          3.27         Coal\n28                          Keystone Industries          2.72         Coal\n29                          Keystone Industries             *         Coal\n30                               SunCoke Energy           1.8         Coal\n31                             Norfolk Southern         43.55         Coal\n32          Levin Richmond Terminal Corporation          0.91         Coal\n33                           City of Louisville          6.35         Coal\n34                 Alabama State Port Authority         27.22         Coal\n35                     Millenium Bulk Terminals            44         Coal\n36                                Kinder Morgan             *         Coal\n37                          Cooper Consolidated          19.1    All Cargo\n38                                Walter Energy             5         Coal\n39                                Kinder Morgan          13.2         Coal\n40                                Kinder Morgan          1.36         Coal\n41                       Calhoun Port Authority          3.04         Coal\n42                                            -             *         Coal\n43                                            -           9.1    All Cargo\n44                                            -           9.1         Coal\n45                                            -          25.4         Coal\n46                                            -         12.25         Coal\n47                                            -             *         Coal\n48                             Robindale Energy          2.27         Coal\n49                                            -          3.63         Coal\n50                                            -         22.68         Coal\n51                   Insight Terminal Solutions             5         Coal\n52 Metropolitan Stevedore Company (Metro Ports)          1.81         Coal\n53                                Kinder Morgan            20         Coal\n54                               SunCoke Energy          6.35         Coal\n55              RAM Terminals, Armstrong Energy           9.1         Coal\n56                                            -           5.4         Coal\n57                             Norfolk Southern          6.35         Coal\n58                                            -          1.36         Coal\n59                                Kinder Morgan             5    All Cargo\n60                                Kinder Morgan          2.27    All Cargo\n61                             Foresight Energy         22.68         Coal\n62             Midwest Energy Resources Company         23.13         Coal\n63                                Kinder Morgan             *         Coal\n64          Tradepoint Atlantic, Host Terminals          2.72    All Cargo\n65                               T. Parker Host           9.1         Coal\n66                               T. Parker Host           9.1         Coal\n67                        Port of Vancouver USA             *         Coal\n68                             Warrior Met Coal             *         Coal\n69                             Robindale Energy           9.1    All Cargo\n       Terminal.Type Opening.Year Retire.Year            Location\n1           Domestic            -           -         Cattlesburg\n2            Exports         1999        2016           Ashtabula\n3           Domestic            -        2018                    \n4            Exports            -           -    Ascension Parish\n5            Exports         2014           -    Ascension Parish\n6           Domestic            -           -              Sauget\n7  Domestic, Exports         2003           -        Calvert City\n8   Exports, Imports            -           -              Ceredo\n9            Exports         1983           -                    \n10           Exports            -           -            Conneaut\n11           Exports            -           -             Convent\n12           Exports            -           -                    \n13          Domestic            -           -            Rockwood\n14           Exports            -           -                    \n15           Exports            -           -                    \n16           Exports            -           -                    \n17           Exports         1984           -        Newport News\n18          Domestic            -           -              Donora\n19           Exports            -           -      Fairless Hills\n20           Exports         2015           -             Paducah\n21           Exports            -           -        Cherry Point\n22           Exports            -           -        Grand Rivers\n23           Exports            -           -                    \n24           Exports         1981           - Plaquemine's Parish\n25           Exports         2014           - Plaquemine's Parish\n26           Exports            -           -         Channelview\n27          Domestic            -           -               Modoc\n28           Imports         2011           -                    \n29          Domestic            -           -                    \n30  Exports, Imports            -           -        East Chicago\n31           Exports            -           -             Norfolk\n32           Exports            -           -            Richmond\n33                 -            -           -          Louisville\n34           Exports            -           -                    \n35           Exports            -           -            Longview\n36          Domestic            -           -                    \n37           Exports            -           -                    \n38           Exports            -           -                    \n39  Exports, Imports         1983           -        Newport News\n40  Exports, Imports         2014           -        Newport News\n41           Exports            -           -       Point Comfort\n42           Exports            -           -                    \n43           Exports            -           -                    \n44           Exports            -           -                    \n45          Domestic            -           -                    \n46           Exports            -           -                    \n47           Exports            -           -                    \n48  Exports, Imports            -           -                    \n49           Exports            -           -                    \n50           Exports            -           -                    \n51           Exports            -           -                    \n52           Exports         1981           -                    \n53           Exports            -           -                    \n54  Exports, Imports            -           -           Dickinson\n55           Exports            -           - Plaquemine's Parish\n56           Exports            -           -            Richmond\n57           Exports            -           -                    \n58           Exports            -        2016              Seward\n59           Exports            -           -          Charleston\n60           Imports         1982           -          Charleston\n61           Exports         2012           -          Evansville\n62          Domestic            -           -            Superior\n63           Imports            -           -                    \n64           Exports         2014           -      Sparrows Point\n65           Exports            -           -              Davant\n66           Exports            -           -              Davant\n67           Exports            -           -           Vancouver\n68           Exports            -           -       Walker County\n69                 -            -           -             Rayland\n   State.Province       Country ISO.Code        Subregion   Region Latitude\n1        Kentucky United States      840 Northern America Americas 38.30644\n2            Ohio United States      840 Northern America Americas 41.87722\n3         Alabama United States      840 Northern America Americas 30.72393\n4       Louisiana United States      840 Northern America Americas 30.13493\n5       Louisiana United States      840 Northern America Americas 30.13493\n6        Illinois United States      840 Northern America Americas 38.60312\n7        Kentucky United States      840 Northern America Americas 37.04981\n8   West Virginia United States      840 Northern America Americas 38.39846\n9        Maryland United States      840 Northern America Americas 39.26206\n10           Ohio United States      840 Northern America Americas 41.96588\n11      Louisiana United States      840 Northern America Americas 30.04879\n12        Alabama United States      840 Northern America Americas 30.70391\n13       Illinois United States      840 Northern America Americas 37.80938\n14         Oregon United States      840 Northern America Americas 45.85263\n15       Maryland United States      840 Northern America Americas 39.22465\n16          Texas United States      840 Northern America Americas 29.73452\n17       Virginia United States      840 Northern America Americas 36.96580\n18   Pennsylvania United States      840 Northern America Americas 40.19555\n19   Pennsylvania United States      840 Northern America Americas 40.14014\n20       Kentucky United States      840 Northern America Americas 37.13752\n21     Washington United States      840 Northern America Americas 48.86127\n22       Kentucky United States      840 Northern America Americas 37.01992\n23          Texas United States      840 Northern America Americas 29.61110\n24       Lousiana United States      840 Northern America Americas 29.49444\n25       Lousiana United States      840 Northern America Americas 29.49444\n26          Texas United States      840 Northern America Americas 29.74904\n27       Illinois United States      840 Northern America Americas 38.01002\n28        Florida United States      840 Northern America Americas 30.36632\n29           Ohio United States      840 Northern America Americas 38.50995\n30        Indiana United States      840 Northern America Americas 41.67476\n31       Virginia United States      840 Northern America Americas 36.87376\n32     California United States      840 Northern America Americas 37.92120\n33       Kentucky United States      840 Northern America Americas 38.15733\n34        Alabama United States      840 Northern America Americas 30.65554\n35     Washington United States      840 Northern America Americas 46.14036\n36      Wisconsin United States      840 Northern America Americas 43.01201\n37       Lousiana United States      840 Northern America Americas 29.93694\n38        Alabama United States      840 Northern America Americas 30.71217\n39       Virginia United States      840 Northern America Americas 36.96853\n40       Virginia United States      840 Northern America Americas 36.96853\n41          Texas United States      840 Northern America Americas 28.67611\n42         Oregon United States      840 Northern America Americas 43.38113\n43          Texas United States      840 Northern America Americas 27.81846\n44          Texas United States      840 Northern America Americas 27.82111\n45      Minnesota United States      840 Northern America Americas 46.75972\n46          Texas United States      840 Northern America Americas 29.30690\n47     Washington United States      840 Northern America Americas 46.96519\n48      Wisconsin United States      840 Northern America Americas 44.53571\n49     California United States      840 Northern America Americas 33.74879\n50    New Orleans United States      840 Northern America Americas 29.93694\n51     California United States      840 Northern America Americas 37.79553\n52     California United States      840 Northern America Americas 37.95164\n53         Oregon United States      840 Northern America Americas 45.89538\n54  West Virginia United States      840 Northern America Americas 38.19918\n55       Lousiana United States      840 Northern America Americas 29.62324\n56     California United States      840 Northern America Americas 37.91283\n57           Ohio United States      840 Northern America Americas 41.45878\n58         Alaska United States      840 Northern America Americas 60.11878\n59 South Carolina United States      840 Northern America Americas 32.82481\n60 South Carolina United States      840 Northern America Americas 32.82481\n61        Indiana United States      840 Northern America Americas 37.89402\n62      Wisconsin United States      840 Northern America Americas 46.73761\n63        Florida United States      840 Northern America Americas 27.90454\n64       Maryland United States      840 Northern America Americas 39.20747\n65      Louisiana United States      840 Northern America Americas 29.61800\n66      Louisiana United States      840 Northern America Americas 29.61800\n67     Washington United States      840 Northern America Americas 45.64333\n68        Alabama United States      840 Northern America Americas 33.53583\n69           Ohio United States      840 Northern America Americas 40.19312\n    Longitude    Accuracy\n1   -82.57856       Exact\n2   -80.79694       Exact\n3   -88.04663       Exact\n4   -90.92034       Exact\n5   -90.92034       Exact\n6   -90.18595       Exact\n7   -88.38335       Exact\n8   -82.55270       Exact\n9   -76.56057       Exact\n10  -80.54812 Approximate\n11  -90.83321       Exact\n12  -88.03504       Exact\n13  -89.66960       Exact\n14 -119.67197       Exact\n15  -76.58329       Exact\n16  -95.14408       Exact\n17  -76.42341       Exact\n18  -79.87231       Exact\n19  -74.75471       Exact\n20  -88.73286       Exact\n21 -122.75175       Exact\n22  -88.25512       Exact\n23  -95.02170       Exact\n24  -89.71250       Exact\n25  -89.71250       Exact\n26  -95.10954       Exact\n27  -90.05809       Exact\n28  -81.62614       Exact\n29  -82.66841       Exact\n30  -87.41465       Exact\n31  -76.31661       Exact\n32 -122.36658       Exact\n33  -85.89849       Exact\n34  -88.03755       Exact\n35 -123.00002       Exact\n36  -87.89429       Exact\n37  -90.06194       Exact\n38  -88.04331 Approximate\n39  -76.42706       Exact\n40  -76.42706       Exact\n41  -96.55889       Exact\n42 -124.21606       Exact\n43  -97.46489       Exact\n44  -97.43532       Exact\n45  -92.11528       Exact\n46  -94.79663       Exact\n47 -123.85476       Exact\n48  -88.01132       Exact\n49 -118.20630       Exact\n50  -90.06194       Exact\n51 -122.28460       Exact\n52 -121.31764       Exact\n53 -122.80927       Exact\n54  -81.50119       Exact\n55  -89.91872       Exact\n56 -122.36055       Exact\n57  -82.73211       Exact\n58 -149.43046       Exact\n59  -79.93653       Exact\n60  -79.93653       Exact\n61  -87.73169       Exact\n62  -92.11517       Exact\n63  -82.41776       Exact\n64  -76.47725       Exact\n65  -89.89375       Exact\n66  -89.89375       Exact\n67 -122.70417       Exact\n68  -87.23896 Approximate\n69  -80.67577       Exact\n                                                                  Coal.source\n1                                                                            \n2  Ohio, Pennsylvania and West Virginia, sent to Canada and Great Lakes Basin\n3                                                                            \n4                                                                            \n5                                                                            \n6                                                                            \n7                Illinois Basin, American West (including Powder River Basin)\n8                                                                            \n9                         West Virginia, Ohio and Northeast Pennsylvania, USA\n10                                                                           \n11                                                                   Illinois\n12                                                                           \n13                                                                   Illinois\n14                                                         Powder River Basin\n15                            from Appalachia, to China, S Korea, Netherlands\n16                                                                           \n17                                                                           \n18                                                            Western PA, USA\n19                                                                           \n20                                         Powder River Basin, Illinois Basin\n21                                                                           \n22                                                                           \n23                                                                           \n24                                   Appalachia, Illinois, Powder River Basin\n25                                   Appalachia, Illinois, Powder River Basin\n26                                                                           \n27                                                                           \n28                                                                   Colombia\n29                                                         West Virginia, USA\n30                                                                           \n31                                                                           \n32                                                          Colorado and Utah\n33                                                                           \n34                                                                           \n35                                                                           \n36                                                                           \n37                                                                           \n38                                                                    Alabama\n39                                                                           \n40                                                                           \n41                                                                           \n42                                                                           \n43                                                                           \n44                                                                           \n45                                                        Montana and Wyoming\n46                                                                           \n47                                                                           \n48                                                                           \n49                                                          Colorado and Utah\n50               Central Appalachia and the Illinois Basin to Asia and Europe\n51                                                                  Utah, USA\n52                                                          Colorado and Utah\n53                                                                           \n54                                                                           \n55               Colorado, Powder River Basin (PRB), Illinois Basin (West KY)\n56                                                                           \n57                                                                           \n58                                                         Usibelli Coal Mine\n59                                                                           \n60                                                                           \n61                                                                   Illinois\n62                                                                           \n63                                                                           \n64                                                                           \n65                                                                   Illinois\n66                                                                   Illinois\n67                                                                           \n68                                                            Blue Creek Mine\n69                                                                           \n\n\n\n# Download the census tract shapefiles for all states from tigris package\n\n#census_tracts_us &lt;- tracts(cb=TRUE)\n\n#census_tracts_us &lt;-  st_transform(census_tracts_us, 4269)\n\n# save the tract level shapefiles to the working data directory\n# commenting out since file exists\n# st_write(census_tracts_us, \"data/all_census_tracts_us.shp\")\n\n# we're repeating the above process but with counties\n# keep the tract shapefiles in our data directory so we can do a more granular analysis locally\n\n#census_counties_us &lt;- counties(cb=TRUE)\n#census_counties_us &lt;-  st_transform(census_counties_us, 4269)\n\n# save county-level shapes to the working data directory\n# commenting out since file exists\n#st_write(census_counties_us, \"data/all_census_counties_us.shp\")\n\n\ninitialize a point map with leaflet\n\n# Load point data\n\npoints_sf &lt;- st_as_sf(data, coords = c(\"Longitude\", \"Latitude\"), crs = 4269)\n\n# Load census tract shapefiles\n#census_tracts &lt;- st_read(\"data/all_census_tracts_us.shp\")\n\n# Load census county shapefiles\ncensus_counties &lt;- st_read(\"data/all_census_counties_us.shp\")\n\nReading layer `all_census_counties_us' from data source \n  `C:\\Users\\shrad\\djnf-data-project\\data\\all_census_counties_us.shp' \n  using driver `ESRI Shapefile'\nSimple feature collection with 3235 features and 12 fields\nGeometry type: MULTIPOLYGON\nDimension:     XY\nBounding box:  xmin: -179.1467 ymin: -14.5487 xmax: 179.7785 ymax: 71.38782\nGeodetic CRS:  NAD83\n\n\n\n# Create the map\nmap &lt;- leaflet(options = leafletOptions(preferCanvas = TRUE)) %&gt;%\n  addTiles() %&gt;%\n  setView(lng = -96.25, lat = 39.50, zoom = 4) %&gt;% \n  addPolygons(data = census_counties,\n              fillColor = \"lightgray\",\n              color = \"gray\",\n              weight = 1,\n              fillOpacity = 0.5) %&gt;% \n  addCircleMarkers(\n              data = points_sf,\n             color = \"red\",\n             opacity = 0.8,\n             weight = 2,\n             radius = 5)\n\nWarning: sf layer has inconsistent datum (+proj=longlat +datum=NAD83 +no_defs).\nNeed '+proj=longlat +datum=WGS84'\n\nWarning: sf layer has inconsistent datum (+proj=longlat +datum=NAD83 +no_defs).\nNeed '+proj=longlat +datum=WGS84'\n\n\n\nmap"
  }
]